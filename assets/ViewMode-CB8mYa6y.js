import{j as r}from"./index-C7_iK65s.js";import{r as n}from"./dnd-rQwR96rA.js";import{B as k}from"./BlockRenderer-npRBB15T.js";import{s as S}from"./storage-BQ6sJ59P.js";import"./vendor-23BElR75.js";import"./ui-CW_nnz6f.js";import"./supabase-DxozfYyO.js";const A=({uuid:w})=>{const[l,u]=n.useState([]),[N,p]=n.useState(null),[g,h]=n.useState(null),[P,f]=n.useState(!0);return n.useEffect(()=>{(async()=>{try{f(!0);const i=new URLSearchParams(window.location.search),x=new URLSearchParams(window.location.hash.includes("?")?window.location.hash.split("?")[1]:""),y=i.get("project")||x.get("project"),j=i.get("data")||x.get("data");if(y){const e=await S.getPublishedContent(y);if(e){if(u(e.blocks||[]),p(e.metadata),e.metadata){const s=`${e.metadata.type} "${e.metadata.title}"`,m=e.metadata.description||e.metadata.title;document.title=s;const a=(o,d)=>{let t=document.querySelector(`meta[property="${o}"]`);t||(t=document.createElement("meta"),t.setAttribute("property",o),document.head.appendChild(t)),t.setAttribute("content",d)},b=(o,d)=>{let t=document.querySelector(`meta[name="${o}"]`);t||(t=document.createElement("meta"),t.setAttribute("name",o),document.head.appendChild(t)),t.setAttribute("content",d)};a("og:title",s),a("og:description",m),a("og:type","article"),e.metadata.image&&(a("og:image",e.metadata.image),a("kakao:image",e.metadata.image)),a("kakao:title",s),a("kakao:description",m),b("description",m)}}else h("콘텐츠를 찾을 수 없습니다. URL이 유효하지 않거나 만료되었을 수 있습니다.")}else if(j){const e=decodeURIComponent(atob(j)),s=JSON.parse(e);u(s.blocks||[]),p(s.metadata)}}catch(i){console.error(i),h("콘텐츠를 불러오는데 실패했습니다. URL이 유효하지 않을 수 있습니다.")}finally{f(!1)}})()},[w]),g?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-red-500",children:g}):l.length===0?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-gray-500",children:"콘텐츠를 불러오는 중..."}):r.jsx("div",{className:"min-h-screen bg-gray-50 flex justify-center",children:r.jsx("div",{className:"w-full max-w-[480px] bg-white min-h-screen shadow-lg",children:l.map(c=>r.jsx("div",{className:"relative",children:r.jsx(k,{block:c})},c.id))})})};export{A as default};
