import{j as i}from"./index-DIKKua7q.js";import{r as n}from"./dnd-rQwR96rA.js";import{B as N}from"./BlockRenderer-Bd-HkCC6.js";import{s as P}from"./storage-BQ6sJ59P.js";import"./vendor-23BElR75.js";import"./ui-CW_nnz6f.js";import"./supabase-DxozfYyO.js";const M=({uuid:b})=>{const[g,u]=n.useState([]),[R,h]=n.useState(null),[p,f]=n.useState(null),[k,w]=n.useState(!0);return n.useEffect(()=>{(async()=>{try{w(!0);const c=new URLSearchParams(window.location.search),x=new URLSearchParams(window.location.hash.includes("?")?window.location.hash.split("?")[1]:""),y=c.get("project")||x.get("project"),j=c.get("data")||x.get("data");if(y){const t=await P.getPublishedContent(y);if(t){if(u(t.blocks||[]),h(t.metadata),t.metadata){const r=`${t.metadata.type} "${t.metadata.title}"`,m=t.metadata.description||t.metadata.title,S=window.location.href;document.title=r;const e=(s,l)=>{let a=document.querySelector(`meta[property="${s}"]`);a||(a=document.createElement("meta"),a.setAttribute("property",s),document.head.appendChild(a)),a.setAttribute("content",l)},o=(s,l)=>{let a=document.querySelector(`meta[name="${s}"]`);a||(a=document.createElement("meta"),a.setAttribute("name",s),document.head.appendChild(a)),a.setAttribute("content",l)};e("og:title",r),e("og:description",m),e("og:type","article"),e("og:url",S),e("og:site_name","강동어울림복지관"),t.metadata.image&&(e("og:image",t.metadata.image),e("og:image:width","1200"),e("og:image:height","630"),e("og:image:alt",r)),e("kakao:title",r),e("kakao:description",m),t.metadata.image&&e("kakao:image",t.metadata.image),o("twitter:card","summary_large_image"),o("twitter:title",r),o("twitter:description",m),t.metadata.image&&o("twitter:image",t.metadata.image),o("description",m)}}else f("콘텐츠를 찾을 수 없습니다. URL이 유효하지 않거나 만료되었을 수 있습니다.")}else if(j){const t=decodeURIComponent(atob(j)),r=JSON.parse(t);u(r.blocks||[]),h(r.metadata)}}catch(c){console.error(c),f("콘텐츠를 불러오는데 실패했습니다. URL이 유효하지 않을 수 있습니다.")}finally{w(!1)}})()},[b]),p?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-red-500",children:p}):k||g.length===0?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-gray-500",children:"콘텐츠를 불러오는 중..."}):i.jsx("div",{className:"min-h-screen bg-gray-50 flex justify-center",children:i.jsx("div",{className:"w-full max-w-[480px] bg-white min-h-screen shadow-lg",children:g.map(d=>i.jsx("div",{className:"relative",children:i.jsx(N,{block:d})},d.id))})})};export{M as default};
