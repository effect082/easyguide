import{u as P,j as t}from"./index-DKXCPCNp.js";import{r as l}from"./dnd-D9GKTfLJ.js";import{s as g}from"./storage-C84EHcZ9.js";import{P as k,X as C}from"./ui-BDYvznTM.js";import"./vendor-OvXVS5lI.js";const L=()=>{const{dispatch:u}=P(),[n,c]=l.useState([]),[D,d]=l.useState(!0),[p,m]=l.useState(!1),[f,i]=l.useState(!1),[x,y]=l.useState("ì „ì²´"),[s,o]=l.useState({title:"",category:"ê°œì¸",type:"ë‰´ìŠ¤ë ˆí„°",password:"",author:""});l.useEffect(()=>{j()},[]);const j=async()=>{const e=localStorage.getItem("projects_cache");if(e)try{c(JSON.parse(e)),d(!1)}catch(r){console.warn("Failed to parse project cache",r)}try{e||d(!0);const r=await g.getProjects();c(r),localStorage.setItem("projects_cache",JSON.stringify(r))}catch(r){console.error("Failed to load projects:",r),e||alert("í”„ë¡œì íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{d(!1)}},v=async()=>{if(p)return;if(!s.title||!s.password||!s.author){alert("ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}if(s.password.length!==4||!/^\d{4}$/.test(s.password)){alert("ë¹„ë°€ë²ˆí˜¸ëŠ” 4ìë¦¬ ìˆ«ìì—¬ì•¼ í•©ë‹ˆë‹¤.");return}m(!0);const e={id:Date.now().toString(),title:s.title,category:s.category,type:s.type,password:s.password,author:s.author,blocks:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};try{await g.saveProject(e);const r=[e,...n];c(r),localStorage.setItem("projects_cache",JSON.stringify(r)),u({type:"LOAD_PROJECT",payload:e}),o({title:"",category:"ê°œì¸",type:"ë‰´ìŠ¤ë ˆí„°",password:"",author:""}),i(!1)}catch(r){console.error("Failed to create project:",r),alert("í”„ë¡œì íŠ¸ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{m(!1)}},w=e=>{prompt("ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (4ìë¦¬):")===e.password?u({type:"LOAD_PROJECT",payload:e}):alert("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.")},N=async e=>{const r=n.find(a=>a.id===e);if(!r)return;const h=prompt("ì‚­ì œí•˜ë ¤ë©´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (4ìë¦¬):");if(h===r.password){if(window.confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{await g.deleteProject(e),c(n.filter(a=>a.id!==e))}catch(a){console.error("Failed to delete project:",a),alert(`í”„ë¡œì íŠ¸ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.
ì˜¤ë¥˜: ${a.message||a}`)}}else h!==null&&alert("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.")},b=n.filter(e=>x==="ì „ì²´"?!0:e.category===x),S=e=>{const r=new Date(e);return`${r.getFullYear()}ë…„ ${r.getMonth()+1}ì›” ${r.getDate()}ì¼ ì˜¤í›„ ${String(r.getHours()).padStart(2,"0")}:${String(r.getMinutes()).padStart(2,"0")}`};return t.jsxs("div",{className:"min-h-screen bg-gray-50 p-8",children:[t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"ëª¨ë°”ì¼ ì½˜í…ì¸  í†µí•© ê´€ë¦¬"}),t.jsxs("button",{onClick:()=>i(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 font-medium",children:[t.jsx(k,{size:20}),"ìƒˆ í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°"]})]}),t.jsx("p",{className:"text-gray-600 mb-6",children:"ë§Œë“¤ì–´ì§„ ì½˜í…ì¸ ë¥¼ ê´€ë¦¬í•˜ê³  ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•˜ì„¸ìš”."}),t.jsx("div",{className:"flex gap-6 border-b border-gray-200 mb-6",children:["ì „ì²´","ê°œì¸","íŒ€"].map(e=>t.jsx("button",{onClick:()=>y(e),className:`pb-3 px-1 font-medium transition-colors ${x===e?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:e},e))}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(e=>t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[t.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center",children:[t.jsx("button",{onClick:()=>N(e.id),className:"absolute top-3 right-3 w-8 h-8 bg-white rounded-full flex items-center justify-center text-gray-400 hover:text-red-600 hover:bg-red-50 transition-colors shadow-sm",children:t.jsx(C,{size:16})}),t.jsx("div",{className:"text-center",children:t.jsx("div",{className:"text-6xl mb-2",children:"ğŸ“„"})})]}),t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${e.category==="íŒ€"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:e.category}),t.jsx("span",{className:"text-xs text-gray-400",children:S(e.createdAt)})]}),t.jsx("h3",{className:"font-bold text-gray-900 mb-1 truncate",children:e.title}),t.jsxs("p",{className:"text-sm text-gray-500 truncate",children:[e.author," Â· ",e.type]}),t.jsx("button",{onClick:()=>w(e),className:"mt-3 w-full py-2 text-sm text-gray-600 hover:text-blue-600 font-medium border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:"í¸ì§‘"})]})]},e.id))}),b.length===0&&t.jsxs("div",{className:"text-center py-16 text-gray-400",children:[t.jsx("p",{children:"í”„ë¡œì íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤."}),t.jsx("p",{className:"text-sm mt-2",children:"ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”!"})]})]}),f&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full p-8",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"ìƒˆ í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°"}),t.jsxs("div",{className:"space-y-5",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"ì œëª©"}),t.jsx("input",{type:"text",value:s.title,onChange:e=>o({...s,title:e.target.value}),placeholder:"ì˜ˆ: 5ì›” ê°€ì •ì˜ ë‹¬ í–‰ì‚¬ ì´ˆëŒ€",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"ë¶„ë¥˜"}),t.jsx("div",{className:"grid grid-cols-2 gap-3",children:["ê°œì¸","íŒ€"].map(e=>t.jsx("button",{type:"button",onClick:()=>o({...s,category:e}),className:`py-3 rounded-lg border-2 font-medium transition-all ${s.category===e?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:border-gray-400"}`,children:e},e))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"ìœ í˜• ì„ íƒ"}),t.jsx("div",{className:"grid grid-cols-3 gap-3",children:["ë‰´ìŠ¤ë ˆí„°","í™ë³´","ì´ˆëŒ€ì¥"].map(e=>t.jsx("button",{type:"button",onClick:()=>o({...s,type:e}),className:`py-3 rounded-lg border-2 font-medium transition-all text-sm ${s.type===e?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:border-gray-400"}`,children:e},e))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"ë¹„ë°€ë²ˆí˜¸ (4ìë¦¬, ìˆ«ì ë°©ì§€ìš©)"}),t.jsx("input",{type:"text",value:s.password,onChange:e=>{const r=e.target.value.replace(/\D/g,"").slice(0,4);o({...s,password:r})},placeholder:"ìˆ«ì 4ìë¦¬",maxLength:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"ì‘ì„±ìëª… ë˜ëŠ” íŒ€ëª…"}),t.jsx("input",{type:"text",value:s.author,onChange:e=>o({...s,author:e.target.value}),placeholder:"ì˜ˆ: ë³µì§€ì„¼í„°",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),t.jsxs("div",{className:"flex gap-3 mt-8",children:[t.jsx("button",{onClick:()=>i(!1),className:"flex-1 py-3 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"ì·¨ì†Œ"}),t.jsx("button",{onClick:v,className:"flex-1 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"ìƒì„±í•˜ê¸°"})]})]})})]})};export{L as default};
