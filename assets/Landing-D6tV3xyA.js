import{u as N,j as e}from"./index-DIKKua7q.js";import{r as o}from"./dnd-rQwR96rA.js";import{s as x}from"./storage-BQ6sJ59P.js";import{P,X as k}from"./ui-CW_nnz6f.js";import"./vendor-23BElR75.js";import"./supabase-DxozfYyO.js";const O=()=>{const{dispatch:g}=N(),[n,d]=o.useState([]),[S,u]=o.useState(!0),[h,i]=o.useState(!1),[c,p]=o.useState("ì „ì²´"),[r,l]=o.useState({title:"",category:"ê°œì¸",type:"ë‰´ìŠ¤ë ˆí„°",password:"",author:""});o.useEffect(()=>{y()},[]);const y=async()=>{try{u(!0);const t=await x.getProjects();d(t)}catch(t){console.error("Failed to load projects:",t),alert("í”„ë¡œì íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}finally{u(!1)}},f=async()=>{if(!r.title||!r.password||!r.author){alert("ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}if(r.password.length!==4||!/^\d{4}$/.test(r.password)){alert("ë¹„ë°€ë²ˆí˜¸ëŠ” 4ìë¦¬ ìˆ«ìì—¬ì•¼ í•©ë‹ˆë‹¤.");return}const t={id:Date.now().toString(),title:r.title,category:r.category,type:r.type,password:r.password,author:r.author,blocks:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};try{await x.saveProject(t),d([...n,t]),g({type:"LOAD_PROJECT",payload:t}),l({title:"",category:"ê°œì¸",type:"ë‰´ìŠ¤ë ˆí„°",password:"",author:""}),i(!1)}catch(s){console.error("Failed to create project:",s),alert("í”„ë¡œì íŠ¸ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},j=t=>{prompt("ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (4ìë¦¬):")===t.password?g({type:"LOAD_PROJECT",payload:t}):alert("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.")},w=async t=>{const s=n.find(a=>a.id===t);if(!s)return;const b=prompt("ì‚­ì œí•˜ë ¤ë©´ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (4ìë¦¬):");if(b===s.password){if(window.confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{await x.deleteProject(t),d(n.filter(a=>a.id!==t))}catch(a){console.error("Failed to delete project:",a),alert(`í”„ë¡œì íŠ¸ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.
ì˜¤ë¥˜: ${a.message||a}`)}}else b!==null&&alert("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.")},m=n.filter(t=>c==="ì „ì²´"?!0:t.category===c),v=t=>{const s=new Date(t);return`${s.getFullYear()}ë…„ ${s.getMonth()+1}ì›” ${s.getDate()}ì¼ ì˜¤í›„ ${String(s.getHours()).padStart(2,"0")}:${String(s.getMinutes()).padStart(2,"0")}`};return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-8",children:[e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"ëª¨ë°”ì¼ ì½˜í…ì¸  í†µí•© ê´€ë¦¬"}),e.jsxs("button",{onClick:()=>i(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 font-medium",children:[e.jsx(P,{size:20}),"ìƒˆ í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°"]})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"ë§Œë“¤ì–´ì§„ ì½˜í…ì¸ ë¥¼ ê´€ë¦¬í•˜ê³  ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•˜ì„¸ìš”."}),e.jsx("div",{className:"flex gap-6 border-b border-gray-200 mb-6",children:["ì „ì²´","ê°œì¸","íŒ€"].map(t=>e.jsx("button",{onClick:()=>p(t),className:`pb-3 px-1 font-medium transition-colors ${c===t?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:t},t))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(t=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-blue-50 to-purple-50 flex items-center justify-center",children:[e.jsx("button",{onClick:()=>w(t.id),className:"absolute top-3 right-3 w-8 h-8 bg-white rounded-full flex items-center justify-center text-gray-400 hover:text-red-600 hover:bg-red-50 transition-colors shadow-sm",children:e.jsx(k,{size:16})}),e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"text-6xl mb-2",children:"ğŸ“„"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${t.category==="íŒ€"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:t.category}),e.jsx("span",{className:"text-xs text-gray-400",children:v(t.createdAt)})]}),e.jsx("h3",{className:"font-bold text-gray-900 mb-1 truncate",children:t.title}),e.jsxs("p",{className:"text-sm text-gray-500 truncate",children:[t.author," Â· ",t.type]}),e.jsx("button",{onClick:()=>j(t),className:"mt-3 w-full py-2 text-sm text-gray-600 hover:text-blue-600 font-medium border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:"í¸ì§‘"})]})]},t.id))}),m.length===0&&e.jsxs("div",{className:"text-center py-16 text-gray-400",children:[e.jsx("p",{children:"í”„ë¡œì íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤."}),e.jsx("p",{className:"text-sm mt-2",children:"ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”!"})]})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"ìƒˆ í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°"}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"ì œëª©"}),e.jsx("input",{type:"text",value:r.title,onChange:t=>l({...r,title:t.target.value}),placeholder:"ì˜ˆ: 5ì›” ê°€ì •ì˜ ë‹¬ í–‰ì‚¬ ì´ˆëŒ€",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"ë¶„ë¥˜"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:["ê°œì¸","íŒ€"].map(t=>e.jsx("button",{type:"button",onClick:()=>l({...r,category:t}),className:`py-3 rounded-lg border-2 font-medium transition-all ${r.category===t?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:border-gray-400"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"ìœ í˜• ì„ íƒ"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["ë‰´ìŠ¤ë ˆí„°","í™ë³´","ì´ˆëŒ€ì¥"].map(t=>e.jsx("button",{type:"button",onClick:()=>l({...r,type:t}),className:`py-3 rounded-lg border-2 font-medium transition-all text-sm ${r.type===t?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-gray-300 text-gray-700 hover:border-gray-400"}`,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"ë¹„ë°€ë²ˆí˜¸ (4ìë¦¬, ìˆ«ì ë°©ì§€ìš©)"}),e.jsx("input",{type:"text",value:r.password,onChange:t=>{const s=t.target.value.replace(/\D/g,"").slice(0,4);l({...r,password:s})},placeholder:"ìˆ«ì 4ìë¦¬",maxLength:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-900 mb-2",children:"ì‘ì„±ìëª… ë˜ëŠ” íŒ€ëª…"}),e.jsx("input",{type:"text",value:r.author,onChange:t=>l({...r,author:t.target.value}),placeholder:"ì˜ˆ: ë³µì§€ì„¼í„°",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-8",children:[e.jsx("button",{onClick:()=>i(!1),className:"flex-1 py-3 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"ì·¨ì†Œ"}),e.jsx("button",{onClick:f,className:"flex-1 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"ìƒì„±í•˜ê¸°"})]})]})})]})};export{O as default};
