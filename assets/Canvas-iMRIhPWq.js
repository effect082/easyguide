import{u as d,j as e}from"./index-De-xhqgr.js";import{e as b,S as u,v as f,f as v,C as j}from"./dnd-DVAG1M4t.js";import{B as y}from"./BlockRenderer-BW6s6122.js";import{G as w,e as N}from"./ui-l1Od73m0.js";import"./vendor-OvXVS5lI.js";const S=({block:r})=>{const{state:t,dispatch:s}=d(),{attributes:l,listeners:i,setNodeRef:n,transform:c,transition:x,isDragging:h}=v({id:r.id}),p={transform:j.Transform.toString(c),transition:x,opacity:h?.5:1},o=t.selectedBlockId===r.id,g=a=>{a.stopPropagation(),s({type:"SELECT_BLOCK",payload:r.id})},m=a=>{a.stopPropagation(),s({type:"REMOVE_BLOCK",payload:r.id})};return e.jsxs("div",{ref:n,style:p,onClick:g,className:`relative group mb-2 rounded-lg border-2 transition-all ${o?"border-blue-500 ring-2 ring-blue-200":"border-transparent hover:border-gray-300"}`,children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:e.jsx(y,{block:r})}),e.jsxs("div",{className:`absolute -right-10 top-0 flex flex-col gap-1 ${o||"group-hover:flex hidden"}`,children:[e.jsx("div",{...i,...l,className:"p-2 bg-white shadow rounded text-gray-500 cursor-grab hover:text-blue-600",children:e.jsx(w,{size:16})}),e.jsx("button",{onClick:m,className:"p-2 bg-white shadow rounded text-gray-500 hover:text-red-600",children:e.jsx(N,{size:16})})]})]})},L=()=>{const{state:r}=d(),{setNodeRef:t}=b({id:"canvas-droppable"});return e.jsxs("div",{className:"flex-1 bg-white shadow-2xl rounded-[3rem] overflow-hidden border-[8px] border-gray-900 relative mx-auto w-full max-w-[400px] h-[800px]",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-7 bg-gray-900 z-20 flex justify-center",children:e.jsx("div",{className:"w-32 h-5 bg-black rounded-b-xl"})}),e.jsx("div",{ref:t,className:"h-full overflow-y-auto pt-10 pb-20 px-4 scrollbar-hide bg-gray-50",children:e.jsx(u,{items:r.blocks.map(s=>s.id),strategy:f,children:r.blocks.length===0?e.jsx("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 border-2 border-dashed border-gray-200 rounded-xl m-4",children:e.jsx("p",{children:"블록을 이곳으로 드래그하세요"})}):r.blocks.map(s=>e.jsx(S,{block:s},s.id))})})]})};export{L as default};
