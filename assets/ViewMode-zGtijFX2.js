import{j as r}from"./index-De-xhqgr.js";import{r as n}from"./dnd-DVAG1M4t.js";import{B as S}from"./BlockRenderer-BW6s6122.js";import{s as k}from"./storage-DsTSoiGB.js";import"./vendor-OvXVS5lI.js";import"./ui-l1Od73m0.js";const U=({uuid:w})=>{const[l,u]=n.useState([]),[N,p]=n.useState(null),[h,g]=n.useState(null),[P,f]=n.useState(!0);return n.useEffect(()=>{(async()=>{try{f(!0);const i=new URLSearchParams(window.location.search),x=new URLSearchParams(window.location.hash.includes("?")?window.location.hash.split("?")[1]:""),y=i.get("project")||x.get("project"),j=i.get("data")||x.get("data");if(y){const e=await k.getPublishedContent(y);if(e){if(u(e.blocks||[]),p(e.metadata),e.metadata){const a=`${e.metadata.type} "${e.metadata.title}"`,d=e.metadata.description||e.metadata.title;document.title=a;const s=(o,m)=>{let t=document.querySelector(`meta[property="${o}"]`);t||(t=document.createElement("meta"),t.setAttribute("property",o),document.head.appendChild(t)),t.setAttribute("content",m)},b=(o,m)=>{let t=document.querySelector(`meta[name="${o}"]`);t||(t=document.createElement("meta"),t.setAttribute("name",o),document.head.appendChild(t)),t.setAttribute("content",m)};s("og:title",a),s("og:description",d),s("og:type","article"),e.metadata.image&&s("og:image",e.metadata.image),s("kakao:title",a),s("kakao:description",d),b("description",d)}}else g("콘텐츠를 찾을 수 없습니다. URL이 유효하지 않거나 만료되었을 수 있습니다.")}else if(j){const e=decodeURIComponent(atob(j)),a=JSON.parse(e);u(a.blocks||[]),p(a.metadata)}}catch(i){console.error(i),g("콘텐츠를 불러오는데 실패했습니다. URL이 유효하지 않을 수 있습니다.")}finally{f(!1)}})()},[w]),h?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-red-500",children:h}):l.length===0?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-gray-500",children:"콘텐츠를 불러오는 중..."}):r.jsx("div",{className:"min-h-screen bg-gray-50 flex justify-center",children:r.jsx("div",{className:"w-full max-w-[480px] bg-white min-h-screen shadow-lg",children:l.map(c=>r.jsx("div",{className:"relative",children:r.jsx(S,{block:c})},c.id))})})};export{U as default};
