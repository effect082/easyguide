import{j as i}from"./index-DZ2tCgJB.js";import{r as d}from"./dnd-D9GKTfLJ.js";import{B as $}from"./BlockRenderer-CSpskjGj.js";import{s as N}from"./storage-COt4KRzZ.js";import"./vendor-OvXVS5lI.js";import"./ui-BDYvznTM.js";const M=({uuid:k})=>{const[h,g]=d.useState([]),[S,p]=d.useState(null),[f,w]=d.useState(null),[v,x]=d.useState(!0);return d.useEffect(()=>{(async()=>{try{x(!0);const l=new URLSearchParams(window.location.search),b=new URLSearchParams(window.location.hash.includes("?")?window.location.hash.split("?")[1]:""),y=l.get("project")||b.get("project"),j=l.get("data")||b.get("data");if(y){const a=await N.getPublishedContent(y);if(a){if(g(a.blocks||[]),p(a.metadata),a.metadata){const s=`${a.metadata.type} "${a.metadata.title}"`,m=a.metadata.description||a.metadata.title,C=window.location.href.split("#")[0];document.title=s;const e=(t,n)=>{let o=document.querySelector(`meta[property="${t}"]`);o||(o=document.createElement("meta"),o.setAttribute("property",t),document.head.appendChild(o)),o.setAttribute("content",n)},c=(t,n)=>{let o=document.querySelector(`meta[name="${t}"]`);o||(o=document.createElement("meta"),o.setAttribute("name",t),document.head.appendChild(o)),o.setAttribute("content",n)},r=(t=>{if(!t)return"";if(t.startsWith("http://")||t.startsWith("https://"))return t;const n=window.location.origin;return t.startsWith("/")?`${n}${t}`:`${n}/${t}`})(a.metadata.image);e("og:title",s),e("og:description",m),e("og:type","article"),e("og:url",C),e("og:site_name","강동어울림복지관"),r&&(e("og:image",r),e("og:image:width","1200"),e("og:image:height","630"),e("og:image:alt",s)),e("kakao:title",s),e("kakao:description",m),r&&e("kakao:image",r),c("twitter:card","summary_large_image"),c("twitter:title",s),c("twitter:description",m),r&&c("twitter:image",r),c("description",m)}}else w("콘텐츠를 찾을 수 없습니다. URL이 유효하지 않거나 만료되었을 수 있습니다.")}else if(j){const a=decodeURIComponent(atob(j)),s=JSON.parse(a);g(s.blocks||[]),p(s.metadata)}}catch(l){console.error(l),w("콘텐츠를 불러오는데 실패했습니다. URL이 유효하지 않을 수 있습니다.")}finally{x(!1)}})()},[k]),f?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-red-500",children:f}):v||h.length===0?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 text-gray-500",children:"콘텐츠를 불러오는 중..."}):i.jsx("div",{className:"min-h-screen bg-gray-100 flex justify-center sm:py-12 transition-colors duration-300",children:i.jsx("div",{className:"w-full sm:max-w-[420px] min-h-screen sm:min-h-[800px] sm:h-auto shadow-none sm:shadow-2xl sm:rounded-[40px] overflow-hidden transition-all duration-300 relative",style:{backgroundColor:S?.backgroundColor||"#ffffff"},children:h.map(u=>i.jsx("div",{className:"relative",children:i.jsx($,{block:u})},u.id))})})};export{M as default};
