import{s as o}from"./index-uH6ZMM4V.js";const n={getProjects:async()=>{if(!o)throw new Error("Supabase not configured");const{data:e,error:t}=await o.from("projects").select("*").order("updated_at",{ascending:!1});if(t)throw t;return e.map(r=>({id:r.id,title:r.title,category:r.category,type:r.type,password:r.password,author:r.author,blocks:r.blocks||[],createdAt:r.created_at,updatedAt:r.updated_at}))},saveProject:async e=>{if(!o)throw new Error("Supabase not configured");const{data:{user:t}}=await o.auth.getUser(),r={id:e.id,user_id:t?.id,title:e.title,category:e.category,type:e.type,password:e.password,author:e.author,blocks:e.blocks,updated_at:new Date().toISOString()},{data:a,error:s}=await o.from("projects").upsert(r).select().single();if(s)throw s;return e},deleteProject:async e=>{if(!o)throw new Error("Supabase not configured");const{error:t}=await o.from("projects").delete().eq("id",e);if(t)throw t;return!0},getPublishedContent:async e=>{if(!o)throw new Error("Supabase not configured");const{data:t,error:r}=await o.from("published_contents").select("*").eq("id",e).single();return r?null:{id:t.id,projectId:t.project_id,blocks:t.blocks,metadata:t.metadata,publishedAt:t.published_at}},publishContent:async(e,t)=>{if(!o)throw new Error("Supabase not configured");const r={id:e,project_id:t.projectId,blocks:t.blocks,metadata:t.metadata,published_at:t.publishedAt},{error:a}=await o.from("published_contents").upsert(r);if(a)throw a;return t}},i=n;export{i as s};
